import { ObjectUnsubscribedError, Subject } from "../../../../../rxjs/_esm5/index.js";
import { OgodSceneChanges } from "./ogod-scene-changes.js";
export class OgodSceneSubject extends Subject {
  constructor() {
    super();
    this.resetFlag = false;
    this._value = new OgodSceneChanges();
  }

  get value() {
    return this.getValue();
  }

  _subscribe(subscriber) {
    const subscription = super._subscribe(subscriber);

    if (subscription && !subscription.closed) {
      subscriber.next(this._value);
    }

    return subscription;
  }

  getValue() {
    if (this.hasError) {
      throw this.thrownError;
    } else if (this.closed) {
      throw new ObjectUnsubscribedError();
    } else {
      return this._value;
    }
  }

  next(value) {
    if (this.resetFlag) {
      this._value = new OgodSceneChanges();
      this.resetFlag = false;
    }

    this._value.merge(value);

    super.next(this._value);
  }

  reset() {
    this.resetFlag = true;
  }

} //# sourceMappingURL=ogod-scene-subject.js.map